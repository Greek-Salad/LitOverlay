# üìñ LitOverlay

–ü—Ä–æ—Å—Ç–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **–ß—Ç–µ–Ω–∏–µ –≥–ª–∞–≤:** –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≥–ª–∞–≤–∞–º, —Ö—Ä–∞–Ω—è—â–∏–º—Å—è –≤ HTML-—Ñ–∞–π–ª–∞—Ö.
*   **–í—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –∞—É–¥–∏–æ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Ç–µ–∫—Å—Ç –≥–ª–∞–≤—ã –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º.
*   **–¢–µ–º–∏–∑–∞—Ü–∏—è:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Å–≤–µ—Ç–ª–æ–π –∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤ —Ñ–æ–Ω–∞ –∏ —Ç–µ–∫—Å—Ç–∞ –≤—Ä—É—á–Ω—É—é.
*   **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:** –ò–∑–º–µ–Ω–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞, —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—Å—Ç–∞ –∏ —à–∏—Ä–∏–Ω—ã –æ–±–ª–∞—Å—Ç–∏ —á—Ç–µ–Ω–∏—è.
*   **–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∞–±–∑–∞—Ü–µ–≤:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–¥–µ–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞–±–∑–∞—Ü—ã —Ç–µ–∫—Å—Ç–∞ —â–µ–ª—á–∫–æ–º –º—ã—à–∏.
*   **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—É–ª–±–∞—Ä:** –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞.
*   **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á—Ç–µ–Ω–∏—è:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫—É—é —á–∞—Å—Ç—å —Ç–µ–∫—É—â–µ–π –≥–ª–∞–≤—ã –≤—ã —É–∂–µ –ø—Ä–æ—á–∏—Ç–∞–ª–∏.
*   **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω:** –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
litoverlay/
‚îú‚îÄ‚îÄ index.html          # –û—Å–Ω–æ–≤–Ω–∞—è HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ favicon.ico         # –§–∞–≤–∏–∫–æ–Ω–∫–∞
‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ styles.css      # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ audio-player.css # –°—Ç–∏–ª–∏ –∞—É–¥–∏–æ–ø–ª–µ–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ color-picker.css # –°—Ç–∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–∏–∫–µ—Ä–∞ —Ü–≤–µ—Ç–∞
‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îú‚îÄ‚îÄ media-injector.js # –ö–ª–∞—Å—Å –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞
‚îÇ   ‚îî‚îÄ‚îÄ reader.js       # –û—Å–Ω–æ–≤–Ω–æ–π JavaScript
‚îú‚îÄ‚îÄ icons/              # SVG –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ç—É–ª–±–∞—Ä–∞
‚îú‚îÄ‚îÄ fonts/              # –®—Ä–∏—Ñ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ WOFF2
‚îú‚îÄ‚îÄ chapters/           # HTML-—Ñ–∞–π–ª—ã –≥–ª–∞–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 01.html, 02.html ...)
‚îî‚îÄ‚îÄ config/
    ‚îî‚îÄ‚îÄ media-rules.json # –ü—Ä–∞–≤–∏–ª–∞ –≤—Å—Ç–∞–≤–∫–∏ –º—É–ª—å—Ç–∏–º–µ–¥–∏–∞
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π HTTP-—Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Live Server` –≤ VSCode, `http-server`, `python -m http.server` –∏ —Ç.–¥.), —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `fetch` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤, –∏ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π CORS –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ `index.html` –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
2.  –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.
3.  –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:<–ø–æ—Ä—Ç>/index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ì–ª–∞–≤—ã

*   –ü–æ–º–µ—Å—Ç–∏—Ç–µ HTML-—Ñ–∞–π–ª—ã –≥–ª–∞–≤ –≤ –ø–∞–ø–∫—É `chapters/`.
*   –ò–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª—ã –ø–æ —à–∞–±–ª–æ–Ω—É `NN.html` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `01.html`, `02.html`).
*   –ö–∞–∂–¥–∞—è –≥–ª–∞–≤–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å HTML-—Ä–∞–∑–º–µ—Ç–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `<h2>`, `<p>`).

### üéµ –ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞ (media-rules.json)

*   –§–∞–π–ª `config/media-rules.json` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≥–¥–µ –∏ –∫–∞–∫–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤—Å—Ç–∞–≤–ª—è—Ç—å.
*   –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∞—É–¥–∏–æ:
    ```json
    {
      "id": "audio-1",
      "type": "audio",
      "src": ["/media/audio/sound.mp3"], // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
      "title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      "chapter": 1, // –ù–æ–º–µ—Ä –≥–ª–∞–≤—ã
      "position": "after", // "before" –∏–ª–∏ "after"
      "anchor": "–¢–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑ –∞–±–∑–∞—Ü–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –º–µ–¥–∏–∞" // –¢–µ–∫—Å—Ç –≤ –∞–±–∑–∞—Ü–µ, –ø–æ—Å–ª–µ/–¥–æ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –º–µ–¥–∏–∞
    }
    ```
*   –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
    ```json
    {
      "id": "image-1",
      "type": "image",
      "src": ["/media/images/img1.png", "/media/images/img2.png"], // –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ
      "chapter": 2,
      "position": "after",
      "anchor": "–¢–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑ –∞–±–∑–∞—Ü–∞",
      "width": "80%", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
      "height": "auto" // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    }
    ```

## ‚öô –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

*   **–ù–∞–≤–∏–≥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é (–∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é) –∏–ª–∏ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–µ–¥—ã–¥—É—â–∞—è/–°–ª–µ–¥—É—é—â–∞—è –≥–ª–∞–≤–∞".
*   **–¢–µ–º–∞:** –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ç–µ–º—ã (–ª—É–Ω–∞/—Å–æ–ª–Ω—Ü–µ) –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –ø—Ä–µ—Å–µ—Ç–∞–º–∏ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–≤–µ—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é.
*   **–ù–∞—Å—Ç—Ä–æ–π–∫–∏:** –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —à—Ä–∏—Ñ—Ç–∞, —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—Å—Ç–∞, —à–∏—Ä–∏–Ω—ã –∏ —Ü–≤–µ—Ç–æ–≤.
*   **–ü–æ–¥—Å–≤–µ—Ç–∫–∞:** –©—ë–ª–∫–Ω–∏—Ç–µ –ø–æ –∞–±–∑–∞—Ü—É, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –µ–≥–æ. –©—ë–ª–∫–Ω–∏—Ç–µ —Å–Ω–æ–≤–∞, —á—Ç–æ–±—ã —Å–Ω—è—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ.
*   **–ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞:** –ê—É–¥–∏–æ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ `media-rules.json`.

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

*   –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π ES6+, `fetch`, `localStorage`, `DOMParser`, `IntersectionObserver` (–¥–ª—è debounce), `CSS Custom Properties`, `Flexbox`, `position: fixed/sticky`.

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ, –¥–µ–ª–∏—Ç–µ—Å—å.

> üí° **–°–æ–≤–µ—Ç –¥–ª—è —Å—Ç—Ä–∏–º–µ—Ä–æ–≤**: –∏—Å–ø–æ–ª—å–∑—É–π –ø–æ–¥—Å–≤–µ—Ç–∫—É (`–õ–ö–ú –ø–æ –∞–±–∑–∞—Ü—É`), —á—Ç–æ–±—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ç–µ—Ä—è—Ç—å –º–µ—Å—Ç–æ –≤ —Ç–µ–∫—Å—Ç–µ –≤–æ –≤—Ä–µ–º—è –æ–±—â–µ–Ω–∏—è —Å —á–∞—Ç–æ–º!

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Ü–µ–Ω–∏—Ç–µ–ª–µ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –∏ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–≥–æ –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è.